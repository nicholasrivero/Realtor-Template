<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Realtor Template â€” Neutral & Modern</title>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-G669SZ7J74"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-G669SZ7J74');
  </script>

    <!-- Client config (ignored by git). Copy config-sample.js -> config.js and fill in details -->
    <script src="config.js"></script>

    <!-- Leaflet (map) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="anonymous"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin="anonymous"></script>

    <style>
    :root{
      --bg:#f8f5f0; --ink:#2b2a27; --muted:#6e685f; --head:#eae3d7; --accent:#d6c7b0;
      --radius:16px; --header-h:96px;
      --surface:#ffffff; --border:#e1dbd1; --focus:#b6aa96;
    }
    /* Dark theme */
    [data-theme="dark"]{
      --bg:#0f1115; --ink:#e9e9e9; --muted:#a3a3a3; --head:#141821; --accent:#6b8fcf;
      --surface:#161a22; --border:#2a3140; --focus:#4f6fb3;
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Arial,sans-serif;background:var(--bg);color:var(--ink);line-height:1.6}
    a{text-decoration:none;color:inherit}
    img{display:block;max-width:100%;height:auto}

    /* ===== Header with big brand + hamburger-only nav ===== */
    .site-header{
      position:sticky; top:0; z-index:3000;
      display:grid; grid-template-columns:1fr 44px; align-items:center;
      gap:1rem; padding:1.2rem 1.2rem; background:var(--head);
      backdrop-filter:saturate(160%) blur(8px);
      min-height:var(--header-h);
    }
    .brand{ text-align:center; line-height:1.1; width:100%; }
    .brand-title{ font-weight:800; font-size:clamp(1.4rem, 2.8vw, 2rem); letter-spacing:.2px; }
    .brand-subtitle{ color:var(--muted); font-size:clamp(.95rem, 1.4vw, 1.15rem); margin-top:.15rem; }

    .nav-toggle{
      display:inline-flex; align-items:center; justify-content:center;
      appearance:none; border:1px solid var(--border); background:var(--surface); color:var(--ink);
      cursor:pointer; width:44px; height:44px; border-radius:8px; position:relative; z-index:3600;
    }
    .nav-toggle .bar{ display:block; width:24px; height:2px; background:var(--ink); margin:5px auto; transition:transform .2s, opacity .2s; }

    /* Slide-in menu (only nav) */
    .site-nav{
      position:fixed; inset:0 0 0 auto;
      width:min(78vw, 320px); height:100vh; padding:100px 18px 18px;
      display:flex; flex-direction:column; gap:14px;
      background:var(--surface); box-shadow:-24px 0 40px rgba(0,0,0,.12);
      transform:translateX(100%); transition:transform .25s ease;
      z-index:3500; will-change: transform;
    }
    .site-nav a{ padding:.6rem .4rem; border-radius:8px; font-weight:600; font-size:1.02rem; }
    .site-nav a:active{ background:rgba(0,0,0,.06); }
    .site-nav.is-open{ transform:translateX(0); }

    .nav-scrim{ position:fixed; inset:0; background:rgba(0,0,0,.35); z-index:3400; display:block; pointer-events:auto; }
    .nav-scrim[hidden]{ display:none !important; }
    .nav-scrim.is-open{ display:block; }

    .nav-toggle.is-open .bar:nth-child(1){ transform:translateY(7px) rotate(45deg); }
    .nav-toggle.is-open .bar:nth-child(2){ opacity:0; }
    .nav-toggle.is-open .bar:nth-child(3){ transform:translateY(-7px) rotate(-45deg); }

    .body-lock{ overflow:hidden; }

    /* ===== Sections / cards ===== */
    .section{margin-top:2rem; scroll-margin-top:calc(var(--header-h) + 12px);}
    main{max-width:1120px;margin:auto;padding:0 1rem 2rem}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1.25rem}
    .card{display:flex;flex-direction:column;border-radius:var(--radius);overflow:hidden;background:var(--surface);box-shadow:0 8px 28px rgba(0,0,0,.08)}
    .card .media{background:#efe8dc;display:block;overflow:hidden}
    [data-theme="dark"] .card .media{background:#1d2330}
    .card .media img{width:100%;aspect-ratio:16/9;height:auto;object-fit:cover;display:block}
    .card .body{padding:1rem;display:grid;gap:.4rem}
    .muted{color:var(--muted)}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:.6rem 1rem;border-radius:10px;border:1px solid var(--border);background:var(--surface);cursor:pointer;color:var(--ink)}
    .btn.primary{background:var(--accent);border-color:transparent;color:#fff}

    /* ===== Slider frame uses accent color ===== */
    .slider-bg{position:relative;left:50%;width:100vw;transform:translateX(-50%);background:var(--accent);padding:0}
    .carousel{position:relative;overflow:hidden;border-radius:var(--radius);margin:0 auto;max-width:1120px}
    .track{display:flex;gap:0;margin:0;padding:0;transition:transform .5s ease}
    .slide{flex:0 0 100%;position:relative;margin:0;aspect-ratio:16/9}
    .slide img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;object-position:center}
    @supports not (aspect-ratio:1/1){ .slide{height:clamp(260px,58vh,760px)} .slide img{position:static;width:100%;height:100%;object-fit:cover} }
    @media (max-height:520px){ .slide{aspect-ratio:auto;height:58vh} .slide img{position:static;width:100%;height:100%;object-fit:cover} }
    @media (max-width:720px){ .slide{aspect-ratio:4/3} }

    .overlay{
      position:absolute;left:0;right:0;bottom:0;color:#fff;padding:1rem 1.1rem;
      background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.55) 60%,rgba(0,0,0,.8) 100%);
      opacity:0;transform:translateY(8px);transition:opacity .25s, transform .25s
    }
    .slide.is-active .overlay{opacity:1;transform:translateY(0)}
    .ctrls{position:absolute;inset:0;display:flex;align-items:center;justify-content:space-between;padding:0 .5rem;pointer-events:none}
    .ctrl{pointer-events:auto;border:1px solid rgba(255,255,255,.6);background:rgba(0,0,0,.45);color:#fff;width:44px;height:44px;border-radius:999px;display:grid;place-items:center;font-size:1.2rem;cursor:pointer}

    /* ===== Map + Schools ===== */
    #mapWrap{border-radius:var(--radius);overflow:hidden;background:var(--surface);box-shadow:0 8px 28px rgba(0,0,0,.08);position:relative;z-index:0}
    #map{width:100%;height:420px}
    .schools{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1rem}
    .school{background:var(--surface);border-radius:var(--radius);padding:1rem;box-shadow:0 8px 28px rgba(0,0,0,.06)}
    .school small{color:var(--muted)}

    /* ===== Contact polish ===== */
    #contact .card{padding:1.25rem}
    .contact-inner{max-width:760px;margin:0 auto}
    form .row{display:grid;grid-template-columns:1fr 1fr;gap:.75rem}
    @media (max-width:680px){ form .row{grid-template-columns:1fr} }
    form label{display:block;font-weight:600;margin:.25rem 0}
    form input, form textarea{
      width:100%;padding:.8rem 1rem;border:1px solid var(--border);border-radius:10px;background:var(--surface);color:var(--ink);font:inherit;transition:border-color .2s, box-shadow .2s
    }
    form input:focus, form textarea:focus{
      outline:none;border-color:var(--focus);box-shadow:0 0 0 3px color-mix(in oklab, var(--focus) 25%, transparent)
    }
    form textarea{min-height:140px;resize:vertical}
    /* Subject as auto-expanding textarea (ChatGPT-style) */
    #subject{
      font-size:1rem; padding:.8rem 1rem; min-width:100%; box-sizing:border-box;
      resize:none; overflow:hidden; min-height:48px; line-height:1.4;
    }
    .contact-info{text-align:center;margin-top:1rem;padding-top:1rem;border-top:1px dashed var(--border)}
    .contact-info p{margin:.25rem 0}

    /* ===== Realtor (circle headshot) ===== */
    #agent .card{align-items:center}
    .realtor-photo{
      width:168px;height:168px;border-radius:50%;object-fit:cover;
      border:4px solid var(--border); margin:1rem auto 0;
    }
    #agent .body{text-align:center}

    /* Theme toggle button */
    .theme-toggle{
      position:fixed; right:16px; bottom:16px; z-index:3800;
      width:44px; height:44px; border-radius:999px; border:1px solid var(--border);
      background:var(--surface); color:var(--ink); cursor:pointer;
      display:grid; place-items:center; font-size:1.15rem;
      box-shadow:0 6px 18px rgba(0,0,0,.15);
    }
  </style>
</head>
<body>

<!-- ===== Header ===== -->
<header class="site-header">
    <div class="brand">
        <div class="brand-title" id="brandTitle">Brand Title</div>
        <div class="brand-subtitle" id="brandSubtitle">Company Subtitle</div>
    </div>

    <button class="nav-toggle" type="button" aria-label="Open menu" aria-controls="siteNav" aria-expanded="false">
        <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    </button>

    <nav id="siteNav" class="site-nav" aria-hidden="true">
        <a href="#home">Home</a>
        <a href="#listings">Listings</a>
        <a href="#gallery">Gallery</a>
        <a href="#tours">Video Tours</a>
        <a href="#map-section">Map</a>
        <a href="#schools-section">Schools</a>
        <a href="#contact">Contact</a>
    </nav>

    <div class="nav-scrim" hidden></div>
</header>

<!-- Dark mode toggle -->
<button class="theme-toggle" type="button" id="themeToggle" aria-label="Toggle dark mode">ðŸŒ™</button>

<main>
    <!-- ===== HERO ===== -->
    <section id="home" class="section">
        <div class="slider-bg">
            <div class="carousel" role="region" aria-roledescription="carousel" aria-label="Hero images" aria-live="polite">
                <div class="track" id="heroTrack">
                    <figure class="slide is-active">
                        <img src="images/pixasquare-4ojhpgKpS68-unsplash.jpg" alt="Modern neutral home exterior" fetchpriority="high" decoding="async">
                        <figcaption class="overlay">Find your next chapter in a place youâ€™ll love.</figcaption>
                    </figure>
                    <figure class="slide">
                        <img src="images/vu-anh-TiVPTYCG_3E-unsplash.jpg" alt="Luxury homes in neutral tones">
                        <figcaption class="overlay">Modern comfort meets understated elegance.</figcaption>
                    </figure>
                    <figure class="slide">
                        <img src="images/johnson-johnson-U6Q6zVDgmSs-unsplash.jpg" alt="Two-tone house exterior design">
                        <figcaption class="overlay">Quiet streets, welcoming neighborhoods.</figcaption>
                    </figure>
                </div>
                <div class="ctrls" aria-hidden="true">
                    <button class="ctrl hero-prev" type="button" aria-label="Previous hero slide">&#10094;</button>
                    <button class="ctrl hero-next" type="button" aria-label="Next hero slide">&#10095;</button>
                </div>
            </div>
        </div>
    </section>

    <!-- ===== Listings ===== -->
    <section id="listings" class="section">
        <h2>Featured Listings</h2>
        <div class="grid">
            <article class="card">
                <div class="media"><img src="https://picsum.photos/seed/house1/800/450" alt="Listing photo placeholder"></div>
                <div class="body"><strong>123 Placeholder Ave</strong><span class="muted">3 Bed â€¢ 2 Bath â€¢ 1,850 sq ft</span><button class="btn listing-tour">View Video Tour</button></div>
            </article>
            <article class="card">
                <div class="media"><img src="https://picsum.photos/seed/house2/800/450" alt="Listing photo placeholder"></div>
                <div class="body"><strong>456 Example Rd</strong><span class="muted">4 Bed â€¢ 3 Bath â€¢ 2,240 sq ft</span><button class="btn listing-tour">View Video Tour</button></div>
            </article>
            <article class="card">
                <div class="media"><img src="https://picsum.photos/seed/house3/800/450" alt="Listing photo placeholder"></div>
                <div class="body"><strong>789 Sample St</strong><span class="muted">2 Bed â€¢ 2 Bath â€¢ 1,320 sq ft</span><button class="btn listing-tour">View Video Tour</button></div>
            </article>
        </div>
    </section>

    <!-- ===== Realtor ===== -->
    <section id="agent" class="section">
        <h2>Meet Your Realtor</h2>
        <div class="card">
            <img id="agentPhoto" class="realtor-photo" src="images/realtor.jpg" alt="Realtor headshot" onerror="this.style.display='none'">
            <div class="body">
                <strong id="agentName">Jane Doe, RealtorÂ®</strong>
                <p class="muted" id="agentTagline">Neutral Realty Group</p>
                <p>Friendly, responsive, and detail-obsessed. I help buyers and sellers move with confidenceâ€”from first viewing to closing day.</p>
            </div>
        </div>
    </section>

    <!-- ===== Gallery ===== -->
    <section id="gallery" class="section" aria-label="Property gallery">
        <div class="meta-row" style="display:flex;flex-wrap:wrap;gap:1rem;align-items:baseline;justify-content:space-between;margin:.5rem 0 1rem">
            <div>
                <h2 id="addr">123 Placeholder Ave</h2>
                <p id="details" class="muted" style="margin:.25rem 0 0">3 Bed â€¢ 2 Bath â€¢ 1,850 sq ft</p>
            </div>
            <strong id="price" style="font-size:1.25rem">$525,000</strong>
        </div>
        <div class="slider-bg">
            <div class="carousel" role="region" aria-roledescription="carousel" aria-label="Property images" aria-live="polite">
                <div class="track" id="galleryTrack">
                    <figure class="slide is-active" data-price="$525,000" data-details="3 Bed â€¢ 2 Bath â€¢ 1,850 sq ft" data-address="123 Placeholder Ave â€” Exterior">
                        <img src="images/webaliser-_TPTXZd9mOo-unsplash.jpg" alt="Home exterior in neutral palette" />
                        <figcaption class="overlay">Warm, sunlit living room with open flow to dining â€” perfect for hosting or quiet evenings.</figcaption>
                    </figure>
                    <figure class="slide" data-price="$549,000" data-details="3 Bed â€¢ 2.5 Bath â€¢ 1,980 sq ft" data-address="123 Placeholder Ave â€” Kitchen">
                        <img src="images/abby-rurenko-uOYak90r4L0-unsplash.jpg" alt="Modern kitchen with island" />
                        <figcaption class="overlay">Modern kitchen with ample storage, soft-tone cabinetry, and a spacious prep island.</figcaption>
                    </figure>
                    <figure class="slide" data-price="$539,000" data-details="3 Bed â€¢ 2 Bath â€¢ 1,920 sq ft" data-address="123 Placeholder Ave â€” Living">
                        <img src="images/ian-keefe-OgcJIKRnRC8-unsplash.jpg" alt="Bright living space" />
                        <figcaption class="overlay">Serene primary suite with generous daylight and room for a cozy reading corner.</figcaption>
                    </figure>
                </div>
                <div class="ctrls" aria-hidden="true">
                    <button class="ctrl gallery-prev" type="button" aria-label="Previous photo">&#10094;</button>
                    <button class="ctrl gallery-next" type="button" aria-label="Next photo">&#10095;</button>
                </div>
            </div>
        </div>
    </section>

    <!-- ===== Video Tours ===== -->
    <section id="tours" class="section">
        <h2>Video Tours</h2>
        <p class="muted" style="margin-top:-.25rem">A rotating selection of house tour videos (placeholders â€” swap in your own IDs).</p>
        <div class="grid" id="tourGrid"></div>
    </section>

    <!-- ===== Map ===== -->
    <section id="map-section" class="section">
        <h2>Explore On the Map</h2>
        <div id="mapWrap"><div id="map" role="region" aria-label="Map of listings and schools"></div></div>
    </section>

    <!-- ===== Nearby Schools ===== -->
    <section id="schools-section" class="section">
        <h2>Nearby Schools</h2>
        <div class="schools" id="schoolsList"></div>
    </section>

    <!-- ===== Instagram ===== -->
    <section id="instagram" class="section">
        <h2>Latest on Instagram</h2>
        <div class="card">
            <!-- LightWidget WIDGET -->
            <script src="https://cdn.lightwidget.com/widgets/lightwidget.js"></script>
            <iframe src="//lightwidget.com/widgets/1b364137f91258de89e9a4132d6c700e.html"
                    scrolling="no"
                    allowtransparency="true"
                    class="lightwidget-widget"
                    style="width:100%;border:0;overflow:hidden;">
            </iframe>
        </div>
    </section>

    <!-- ===== Contact ===== -->
    <section id="contact" class="section">
        <h2>Contact</h2>
        <div class="card">
            <div class="contact-inner">
                <form id="contactForm" action="https://formspree.io/f/xjkozbeo" method="POST">
                    <div class="row">
                        <div>
                            <label for="name">Name</label>
                            <input id="name" name="name" type="text" placeholder="Your full name" required>
                        </div>
                        <div>
                            <label for="email">Email</label>
                            <input id="email" name="_replyto" type="email" placeholder="you@example.com" required>
                        </div>
                    </div>
                    <div class="row">
                        <div>
                            <label for="phone">Phone</label>
                            <input id="phone" name="phone" type="tel" placeholder="(555) 123-4567">
                        </div>
                        <!-- Subject now auto-expands like ChatGPT -->
                        <div style="grid-column:1/-1">
                            <label for="subject">Subject</label>
                            <textarea id="subject" name="subject" placeholder="Buying, selling, or general question"></textarea>
                        </div>
                    </div>
                    <div class="row">
                        <div style="grid-column:1/-1">
                            <label for="message">Message</label>
                            <textarea id="message" name="message" placeholder="Tell me a bit about your goalsâ€¦" required></textarea>
                        </div>
                    </div>
                    <button class="btn primary" type="submit" style="margin-top:.9rem">Send Message</button>
                </form>

                <div class="contact-info">
                    <p><strong>Email:</strong> agent@example.com</p>
                    <p><strong>Phone:</strong> (555) 123-4567</p>
                </div>
            </div>
        </div>
    </section>
</main>

<!-- ===== Video modal ===== -->
<div id="videoModal" role="dialog" aria-label="Video tour" style="position:fixed;inset:0;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center;z-index:4000;">
    <div style="max-width:900px;width:92%;position:relative;background:#000;border-radius:14px;">
        <button class="modal-close" aria-label="Close video" style="position:absolute;top:8px;right:10px;color:#fff;font-size:1.6rem;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.5);width:38px;height:38px;border-radius:999px;display:grid;place-items:center;cursor:pointer;">&times;</button>
        <iframe src="" frameborder="0" allow="autoplay; fullscreen" allowfullscreen style="width:100%;height:506px"></iframe>
    </div>
</div>

<!-- ===== Apply CONFIG early so rest of scripts can use it ===== -->
<script>
  (function(){
    const C = window.CONFIG || {};

    // Header brand text
    const t = document.getElementById('brandTitle');
    const s = document.getElementById('brandSubtitle');
    if (t && C.BRAND_TITLE)     t.textContent = C.BRAND_TITLE;
    if (s && C.BRAND_SUBTITLE)  s.textContent = C.BRAND_SUBTITLE;

    // Also mirror into Agent section if present
    const an = document.getElementById('agentName');
    const at = document.getElementById('agentTagline');
    if (an && C.BRAND_TITLE)    an.textContent = C.BRAND_TITLE;
    if (at && C.BRAND_SUBTITLE) at.textContent = C.BRAND_SUBTITLE;

    // Contact visible info
    const contactInfo = document.querySelector('#contact .contact-info');
    if (contactInfo) {
      contactInfo.innerHTML = `
        <p><strong>Email:</strong> ${C.EMAIL_VISIBLE || 'agent@example.com'}</p>
        <p><strong>Phone:</strong> ${C.PHONE_VISIBLE || '(555) 123-4567'}</p>
      `;
    }

    // Contact form endpoint
    const form = document.getElementById('contactForm');
    if (form && C.FORM_ENDPOINT) {
      form.action = C.FORM_ENDPOINT;
    }

    // Map center override for Leaflet init
    window.__MAP_CENTER__ = Array.isArray(C.MAP_CENTER) ? C.MAP_CENTER : null;
  })();
</script>

<!-- ===== Main scripts ===== -->
<script>
  /* ===== Mobile hamburger menu ===== */
  document.addEventListener('DOMContentLoaded', function () {
    const btn   = document.querySelector('.nav-toggle');
    const nav   = document.getElementById('siteNav');
    const scrim = document.querySelector('.nav-scrim');
    if (!btn || !nav || !scrim) return;

    function openMenu(){
      btn.classList.add('is-open');
      nav.classList.add('is-open');
      nav.setAttribute('aria-hidden','false');
      scrim.hidden = false;
      scrim.classList.add('is-open');
      btn.setAttribute('aria-expanded','true');
      document.body.classList.add('body-lock');
      const firstLink = nav.querySelector('a'); if (firstLink) firstLink.focus();
    }
    function closeMenu(){
      btn.classList.remove('is-open');
      nav.classList.remove('is-open');
      nav.setAttribute('aria-hidden','true');
      scrim.classList.remove('is-open');
      scrim.hidden = true;
      btn.setAttribute('aria-expanded','false');
      document.body.classList.remove('body-lock');
      btn.focus();
    }

    btn.addEventListener('click', () => nav.classList.contains('is-open') ? closeMenu() : openMenu());
    scrim.addEventListener('click', closeMenu);
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && nav.classList.contains('is-open')) closeMenu(); });
    nav.addEventListener('click', (e) => { if (e.target.tagName === 'A') closeMenu(); });
  });

  /* ===== Auto-expand Subject textarea (ChatGPT style) ===== */
  (function(){
    const box = document.getElementById('subject');
    if(!box) return;
    function autosize(){
      box.style.height = 'auto';
      box.style.height = box.scrollHeight + 'px';
    }
    box.addEventListener('input', autosize);
    autosize();
  })();

  /* ===== Generic slider (no dots) ===== */
  function makeSlider(track, {prev=null,next=null,interval=3000,onChange=null}={}){
    const slides = Array.from(track.children);
    let i=0, t=null;
    function go(n){ i=(n+slides.length)%slides.length;
      track.style.transform=`translateX(-${i*100}%)`;
      slides.forEach((s,k)=>{ s.classList.toggle('is-active',k===i); s.setAttribute('aria-hidden',k===i?'false':'true'); });
      if(onChange) onChange(slides[i], i);
    }
    function start(){ stop(); if(interval) t=setInterval(()=>go(i+1), interval); }
    function stop(){ if(t){clearInterval(t); t=null;} }
    if(prev) prev.addEventListener('click',()=>{go(i-1);start();});
    if(next) next.addEventListener('click',()=>{go(i+1);start();});
    const container = track.parentElement;
    container.addEventListener('mouseenter', stop);
    container.addEventListener('mouseleave', start);
    container.addEventListener('keydown', (e)=>{ if(e.key==='ArrowRight'){e.preventDefault();go(i+1);start();} if(e.key==='ArrowLeft'){e.preventDefault();go(i-1);start();} });
    go(0); start(); return {go,start,stop};
  }

  /* HERO slider */
  makeSlider(document.getElementById('heroTrack'), {
    prev:document.querySelector('.hero-prev'),
    next:document.querySelector('.hero-next'),
    interval:3000
  });

  /* GALLERY slider (updates meta) â€” FIXED */
  const priceEl  = document.getElementById('price');
  const detailsEl= document.getElementById('details');
  const addrEl   = document.getElementById('addr');
  makeSlider(document.getElementById('galleryTrack'),{
    prev:document.querySelector('.gallery-prev'),
    next:document.querySelector('.gallery-next'),
    interval:3000,
    onChange:(slide)=>{
      if (priceEl  && slide.dataset.price)   priceEl.textContent   = slide.dataset.price;
      if (detailsEl&& slide.dataset.details) detailsEl.textContent = slide.dataset.details;
      if (addrEl   && slide.dataset.address) addrEl.textContent    = slide.dataset.address;
    }
  });

  /* ===== Random tour videos (placeholders) ===== */
  const TOUR_IDS=['M7lc1UVf-VE','aqz-KE-bpKQ','dQw4w9WgXcQ','kxopViU98Xo','iik25wqIuFo','oHg5SJYRHA0'];
  function shuffle(arr){ const a=[...arr]; for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }
  const ytThumb=id=>`https://img.youtube.com/vi/${id}/hqdefault.jpg`;
  const ytEmbed=id=>`https://www.youtube-nocookie.com/embed/${id}`;

  /* Video modal controls */
  const modal=document.getElementById('videoModal');
  const frame=modal.querySelector('iframe');
  const closeBtn=modal.querySelector('.modal-close');
  function openVideo(id){ modal.style.display='flex'; frame.src=ytEmbed(id)+'?autoplay=1'; }
  function closeVideo(){ modal.style.display='none'; frame.src=''; }
  closeBtn.addEventListener('click', closeVideo);
  modal.addEventListener('click', e=>{ if(e.target===modal) closeVideo(); });
  document.addEventListener('keydown', e=>{ if(e.key==='Escape') closeVideo(); });

  /* Attach random tours to listing buttons */
  (function(){ const ids=shuffle(TOUR_IDS);
    document.querySelectorAll('.listing-tour').forEach((btn,idx)=>{
      const id=ids[idx%ids.length];
      btn.addEventListener('click', ()=>openVideo(id));
    });
  })();

  /* Build a random Video Tours grid */
  (function(){
    const grid=document.getElementById('tourGrid'); if(!grid) return;
    const ids=shuffle(TOUR_IDS).slice(0,6);
    ids.forEach(id=>{
      const card=document.createElement('article');
      card.className='card';
      card.innerHTML=`
        <div class="media"><img src="${ytThumb(id)}" alt="Video tour thumbnail"></div>
        <div class="body">
          <strong>House Tour</strong>
          <button class="btn" type="button">Watch Tour</button>
        </div>
      `;
      card.querySelector('button').addEventListener('click', ()=>openVideo(id));
      grid.appendChild(card);
    });
  })();

  /* ===== Map + sample markers & nearby schools ===== */
  (function(){
    const fallbackCenter = [29.6516, -82.3248]; // if CONFIG.MAP_CENTER not provided
    const center = window.__MAP_CENTER__ || fallbackCenter;

    const map = L.map('map',{scrollWheelZoom:false}).setView(center, 12);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
      maxZoom:19, attribution:'&copy; OpenStreetMap'
    }).addTo(map);

    const listings=[
      {coords:[center[0]+0.01, center[1]-0.01],label:"123 Placeholder Ave"},
      {coords:[center[0]+0.02, center[1]+0.01],label:"456 Example Rd"},
      {coords:[center[0]-0.01, center[1]+0.01],label:"789 Sample St"}
    ];
    listings.forEach(l=>L.marker(l.coords).addTo(map).bindPopup(l.label));

    const schools=[
      {name:"Oak Grove Elementary",level:"Elementary",distance:"0.5 mi"},
      {name:"Maple Ridge Middle",level:"Middle",distance:"1.2 mi"},
      {name:"Hawthorne High",level:"High",distance:"2.3 mi"}
    ];
    const list=document.getElementById('schoolsList');
    schools.forEach(s=>{
      const div=document.createElement('div');
      div.className='school';
      div.innerHTML=`<strong>${s.name}</strong><br><small>${s.level} â€¢ ${s.distance}</small>`;
      list.appendChild(div);
    });
  })();

  /* ===== Dark mode toggle (persist to localStorage) ===== */
  (function(){
    const btn = document.getElementById('themeToggle');
    const KEY = 'theme';
    const saved = localStorage.getItem(KEY);
    if(saved==='dark') document.documentElement.setAttribute('data-theme','dark');
    if(saved==='light') document.documentElement.removeAttribute('data-theme');

    function updateIcon(){
      const dark = document.documentElement.getAttribute('data-theme')==='dark';
      btn.textContent = dark ? 'â˜€ï¸' : 'ðŸŒ™';
      btn.setAttribute('aria-label', dark ? 'Switch to light mode' : 'Switch to dark mode');
    }
    updateIcon();

    btn.addEventListener('click', ()=>{
      const dark = document.documentElement.getAttribute('data-theme')==='dark';
      if(dark){
        document.documentElement.removeAttribute('data-theme');
        localStorage.setItem(KEY,'light');
      }else{
        document.documentElement.setAttribute('data-theme','dark');
        localStorage.setItem(KEY,'dark');
      }
      updateIcon();
    });
  })();
</script>
</body>
</html>
